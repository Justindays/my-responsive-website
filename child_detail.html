<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小孩點數詳情</title>
    <link rel="stylesheet" href="style.css">

    <script type="module">
        const firebaseConfig = {
          apiKey: "AIzaSyBu6pQxu2Qsyj0tAt3TDSFTCKQwv57Z-p4", // <-- 請確保這裡填入您實際的 API Key
          authDomain: "myresponsivewebsitedata.firebaseapp.com",
          projectId: "myresponsivewebsitedata",
          storageBucket: "myresponsivewebsitedata.firebasestorage.app",
          messagingSenderId: "902585957360",
          appId: "1:902585957360:web:a4376bf3f71a12f300bb35" // <-- 請確保這裡填入您實際的 App ID
        };

        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, doc, updateDoc, deleteDoc, onSnapshot, query, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-firestore.js";

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.db = db;
        window.collection = collection;
        window.addDoc = addDoc;
        window.getDocs = getDocs;
        window.doc = doc;
        window.updateDoc = updateDoc;
        window.deleteDoc = deleteDoc;
        window.onSnapshot = onSnapshot;
        window.query = query;
        window.orderBy = orderBy;
        window.serverTimestamp = serverTimestamp; // 新增 serverTimestamp 用於記錄時間
    </script>
</head>
<body>
    <div class="container">
        <h1 id="childDetailName"></h1> <p>目前點數: <span id="currentScore">0</span></p>

        <div class="score-adjustment-section">
            <h2>調整點數</h2>
            <input type="number" id="pointsInput" placeholder="輸入點數 (可為負數)">
            <input type="text" id="reasonInput" placeholder="輸入原因 (例如：幫忙洗碗)">
            <button id="confirmAdjustmentBtn">確認調整</button>
        </div>

        <div class="transaction-history-section">
            <h2>點數增減紀錄</h2>
            <ul id="transactionHistoryList">
                <p id="noTransactionsMessage" style="text-align: center; margin-top: 20px; display: none;">
                    目前沒有點數紀錄。
                </p>
            </ul>
        </div>

        <button id="backToHomeBtn" class="back-button">返回首頁</button>
    </div>

    <script src="child_detail_script.js"></script>
</body>
</html>